<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<title>tet slick grid demo</title>

<script src="../../jquery31/js/jquery.js"></script>

<link rel="stylesheet" type="text/css" href="../../accord/css/accord.css">
<link rel="stylesheet" type="text/css" href="../../accord/css/tabbed-panel.css">
<script type="module" src="../../accord/js/accord-publish.js"></script>

<script type="text/javascript" src="../../jquery31/js/moment.min.js"></script>
<script type="text/javascript" src="../../jquery31/js/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="../../jquery31/css/daterangepicker.css" />


<link rel="stylesheet" href="../css/tet.slick.grid.css" type="text/css" />
<link rel="stylesheet" href="tsgDemoStyles.css" />
<script type="text/javascript" src="testDataSources.js"></script>
<script type="module" src="tsgExample35.js"></script>
<script>
  $(function() {
    let tp = new TabbedPanel("#tabbedPanel1");
  });
</script>

</head>

<body>
	<div class="basePanel">
		<div class="titlePanel">
			<h2>Пример: Кастомные фильтры</h2>
			<a href="tsgExample35.js" target="source">Source code</a>

		</div>

		<div id="tabbedPanel1" class="tabbed-panel">

			<div class="tab-container">
				<button class="tab active" data-tab="1">Описание</button>
				<button class="tab" data-tab="2">Ключевой код</button>
				<div class="tab-filler"></div>
			</div>

			<div id="tab-1" class="tab-content active">
				<pre class="acc-desc-panel">
Заданы кастомные фильтры для полей.
Это можно сделать несколькими способами:

1)Добавить на страницу скрытый div с id="filterContainer".
И внутри него поместить поля ввода с именами, которые соответствуют column.id.        

Так добавлен выпадающий список для поля "section"(Раздел) и опции выбора для поля "id".


Для поля id мы задали своё текстовое поле ввода с вариантами выбора (через атрибут list)


2)Использовать опцию столбца "filterInput".
В неё можно поместить jquery объект с элементом-фильтром.
Либо функцию, генерирующую фильтр.

accordUtils содержит функции для генерации элемента select на основе массива данных.


Для столбца "Выполнено" такой фильтр сгенерирован функцией accordUtils.generateBooleanSelect:
{   id: "effortDriven", 
    name: "Выполнено",
    width: 150,
    filterInput: accordUtils.generateBooleanSelect,
    formatter: tsgUtils.checkmarkFormatter },

Для столбца "customer" мы генерируем select на основе массива объектов функцией accordUtils.generateSelect:

  let customerColumn = myGrid.model.columnsById["customer"];
  customerColumn.filterInput = accordUtils.generateSelect("customer",dataSource.customers);

3)Использовать дополнительные модули для декорирования фильтров.

Часто бывает необходимо обработать стандартые элементы фильтрации, чтобы добавить им функционал через сторонние библиотеки.
Подобным занимаются дополнительные модули:


Для выбора диапазона дат используется модуль DateRangeModule:

let dm = new DateRangeModule(myGrid);

Теперь для фильтров нужно добавить классы: "date-input"(выбор диапазона дат), "date-single-input"(выбор одной даты)
&lt;input name="start" class="date-input" /&gt; 
&lt;input name="finish" class="date-single-input" /&gt; 

Для выбора чисел используется модуль NumberRangeModule:

let nm = new NumberRangeModule(myGrid);

Для фильтров нужно добавить класс: "number-input"

&lt;input name="percentComplete" class="number-input" /&gt; 






</pre>
			</div>

			<div id="tab-2" class="tab-content">
				<pre class="acc-code-panel">

var columns = [
  {
	id: "customer",
	valueField: "customer.id",
	captionField: "customer.name",
	name: "Заказчик",
	width: 150
  }, {
	id: "section",
	captionField: "section.name",
	valueField: "section.id",
	sortField: "section.id",
	matchType: tsgUtils.matchTypes.NUMBER,
	name: "Раздел",
	width: 150
  }, {
	id: "effortDriven",
	name: "Окончание",
	width: 150,
	filterInput: accordUtils.generateBooleanSelect,
	formatter: tsgUtils.checkmarkFormatter,
  },

];

	dataSource = new TsgDataSource1(100);
	window.dataSource = dataSource;
	
	myGrid = new TetSlickGrid("#myGrid", dataSource.rows, columns, options);
	
	let customerColumn = myGrid.model.columnsById["customer"];
	customerColumn.filterInput = accordUtils.generateSelect("customer",dataSource.customers);
	
	
	myGrid.init();


&lt;div id="filterContainer" style="display: none;"&gt;
	&lt;select name="section"&gt;
		&lt;option value="" selected="selected"&gt;-&lt;/option&gt;
		&lt;option value="0"&gt;Отдел №0&lt;/option&gt;
		&lt;option value="1"&gt;Отдел №1&lt;/option&gt;
	&lt;/select&gt;

	&lt;input type="text" name="id" list="ids" /&gt;


</pre>
			</div>

		</div>

		<div class="tablePanel">
			<div id="myGrid"></div>
		</div>

		<div id="filterContainer" style="display: none;">
			<select name="section">
				<option value="" selected="selected">-</option>
				<option value="0">Отдел №0</option>
				<option value="1">Отдел №1</option>
				<option value="2">Отдел №2</option>
				<option value="3">Отдел №3</option>
				<option value="4">Отдел №4</option>
				<option value="5">Отдел №5</option>
				<option value="6">Отдел №6</option>
				<option value="7">Отдел №7</option>
				<option value="8">Отдел №8</option>
				<option value="9">Отдел №9</option>
				<option value="10">Отдел №10</option>
				<option value="11">Отдел №11</option>
				<option value="12">Отдел №12</option>
				<option value="13">Отдел №13</option>
			</select> 
			
			<input type="text" name="id" list="ids" />
			<datalist id="ids">
				<option>5</option>
				<option>7</option>
				<option>8</option>
				<option>11</option>
			</datalist>

          <input name="start" class="date-input" /> 
          <input name="finish" class="date-single-input" /> 
          <input name="percentComplete" class="number-input" /> 






		</div>





	</div>

</body>
</html>















